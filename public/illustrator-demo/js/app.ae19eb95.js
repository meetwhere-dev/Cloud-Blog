(function(t){function e(e){for(var n,a,s=e[0],c=e[1],h=e[2],u=0,p=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,h||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},o={app:0},i=[];function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),o=r.n(n);o.a},1:function(t,e){},2:function(t,e){},3:function(t,e){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app"},[r("div",{staticClass:"nav"},[r("div",{staticClass:"left"},[t._l(t.tools,(function(e,n){return r("div",{key:n,staticClass:"button",class:t.activeTool===e?"active":"",on:{click:function(r){return t.changeTool(e)}}},[t._v(t._s(e))])})),r("div",{staticClass:"button",on:{click:function(e){return t.deleteItem()}}},[t._v("Delete")]),r("div",{staticClass:"button",on:{click:function(e){t.isSmoothBezierCurve=!t.isSmoothBezierCurve}}},[t._v("SwitchSmoothBezierCurve : "+t._s(t.isSmoothBezierCurve))])],2),r("div",{staticClass:"right"},[r("div",[t._v("Id："+t._s(t.currentItem.id))]),r("div",[t._v("Length："+t._s(t.currentItem.length))]),r("a",{attrs:{href:"https://gitee.com/meetwhere/illustrator-demo"}},[t._v("GitHub")])])]),t._m(0),r("div",{staticClass:"mouse_coord",attrs:{id:"mouse_coord"}},[t._v("Mouse Position X:"+t._s(t.mouse.coord.x.toFixed(2))+" | Y:"+t._s(t.mouse.coord.y.toFixed(2)))])])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mycanvas"},[r("canvas",{attrs:{id:"c",tabindex:"0"}})])}],a=(r("99af"),r("4de4"),r("4160"),r("a15b"),r("b680"),r("ac1f"),r("466d"),r("159b"),r("7a94")),s=r.n(a),c={data:function(){return{tools:["Hand","BezierCurve","Line","Detect"],activeTool:"Hand",canvas:null,zoom:1,isMovePan:!1,isSmoothBezierCurve:!1,mouse:{mouseCircle:null,isClick:!1,isDragging:!1,coord:{x:0,y:0}},allItems:[],currentItem:{isChange:!1,id:"",target:null,length:0,path:null,left:0,top:0},detect:{minDistance:10,target:null,pointer:null}}},watch:{"currentItem.target":{handler:function(t,e){e&&(e.stroke="black"),t&&(t.stroke="blue")},immediate:!1}},methods:{initialize:function(){var t=this;console.log("document:",document);var e=window.innerWidth,r=window.innerHeight,n=this.canvas=new a["fabric"].Canvas("c",{width:e,height:r,backgroundColor:"#F0F1F5"});n.selection=!1,a["fabric"].Object.prototype.selectable=!0,a["fabric"].Object.prototype.hasControls=!1,a["fabric"].Object.prototype.hasBorders=!0,a["fabric"].Object.prototype.hoverCursor="default",a["fabric"].Object.prototype.originX="center",a["fabric"].Object.prototype.originY="center",a["fabric"].Object.prototype.removeSelf=function(){n.remove(this)},a["fabric"].Object.prototype.addSelf=function(){n.add(this)},this.canvas.on({"mouse:move":this.mouseMove,"mouse:out":this.mouseOut,"mouse:down":this.mouseDown,"mouse:up":this.mouseUp});var o=document.getElementsByClassName("upper-canvas");o[0].addEventListener("contextmenu",(function(e){return console.log("终止画笔工具"),t.cutNewLine(),e.preventDefault(),!1})),o[0].ondrop=function(e){e.preventDefault();var r=e.dataTransfer.files[0],n=new FileReader;n.readAsText(r),n.onload=function(){console.log(n.result);var e=/M([\s\S]*?)(?="\/>)/g,r=n.result.match(e);r.forEach((function(e){var r=new a["fabric"].Path(e,{strokeWidth:1});t.relativeToAbsolute(r);var n=new a["fabric"].Path(r.path,{isChange:!1,hoverCursor:"default",objectCaching:!1,type:"Path",strokeWidth:1,fill:"transparent",id:+new Date,stroke:"black"});t.pathPointTemp(n),console.log("创建新的元素：",n.id,n),n.addSelf(),r.removeSelf(),t.allItems.push(n),console.log("目前画布上的元素：",t.allItems)}))}},this.canvas.on("mouse:down",(function(e){e.e.altKey&&(t.isMovePan=!0)})),this.canvas.on("mouse:up",(function(e){t.isMovePan=!1})),this.canvas.on("mouse:move",(function(e){if(t.isMovePan&&e&&e.e){var r=new a["fabric"].Point(e.e.movementX,e.e.movementY);t.canvas.relativePan(r)}})),this.canvas.on("mouse:wheel",(function(e){t.zoom=(e.e.deltaY<0?.1:-.1)+t.zoom,t.zoom=Math.max(.1,t.zoom),t.zoom=Math.min(3,t.zoom);var r=new a["fabric"].Point(300,300);t.canvas.zoomToPoint(r,t.zoom)}))},bezierControlCircle:function(t,e,r,n){var o=this.createCircle(n[t][e],n[t][r]);return o.pathIndex=t,o.pathXY=n[t],o.pathX=e,o.pathY=r,o.on({moved:this.updatePath,moving:this.priviewBezierChange}),o},bezierControlLine:function(t){var e=new a["fabric"].Line(t,{hoverCursor:"default",selectable:!1,hasBorders:!1,objectCaching:!1,hasControls:!1,stroke:"red",type:"Line",strokeWidth:1});return e.sendToBack(),e.addSelf(),e},changeTool:function(t){var e;if(this.activeTool===t)return console.log("点击了相同的工具"),!0;"BezierCurve"===t||"Line"===t||"Detect"===t?(console.log("切换至不可选模式"),a["fabric"].Object.prototype.hasBorders=!1,a["fabric"].Object.prototype.selectable=!1):(console.log("切换至可选模式"),a["fabric"].Object.prototype.hasBorders=!0,a["fabric"].Object.prototype.selectable=!0),(null===(e=this.currentItem.target)||void 0===e?void 0:e.controlCircle)&&this.currentItem.target.controlCircle.forEach((function(t){return t.removeSelf()})),this.currentItem={isChange:!1,id:"",target:null,length:0,path:null,left:0,top:0},this.activeTool=t},cutNewLine:function(){var t;if(this.currentItem.target&&this.currentItem.target.removeSelf(),(null===(t=this.currentItem.path)||void 0===t?void 0:t.length)>2){this.currentItem.path.pop();var e=this.createPath(this.currentItem.path);this.allItems.push(e)}this.currentItem.path=null},createPath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",r="";t.forEach((function(t){r="".concat(r," ").concat(t.join(" "))}));var n=new a["fabric"].Path(r,{isChange:!1,hoverCursor:"default",objectCaching:!1,stroke:e,type:"Path",strokeWidth:1,fill:"transparent",id:+new Date});return(n.width<10||n.height<10)&&(n.padding=10),t.length<3&&"L"===t[1][0]&&(n.type="Line",n.length=this.getLineLength(n)),"C"===n.path[1][0]&&this.pathPointTemp(n),n.on({mousedblclick:this.objDbclick,moved:this.objMoved,mousedown:this.objMouseDown,moving:this.objMoving}),this.canvas.add(n),n.sendToBack(),n},createBezierCurveControl:function(t){var e=t.target,r=[];e.controlCircle=r;for(var n,o,i,a,s,c,h=e.path,l=1,u=h.length;l<u;l++)1===l?(n=this.bezierControlCircle(0,1,2,h),r.push(n),n.controlLine={center:!0,line:[],othersContral:[]},a=this.bezierControlLine([h[1][1],h[1][2],h[0][1],h[0][2]])):(a=this.bezierControlLine([h[l][1],h[l][2],h[l-1][5],h[l-1][6]]),i.controlLine.line.push(a)),n.controlLine.line.push(a),c=s=this.bezierControlLine([h[l][3],h[l][4],h[l][5],h[l][6]]),o=this.bezierControlCircle(l,1,2,h),n.controlLine.othersContral.push(o),1===l?o.controlLine={center:!1,line:[a],othersContral:[n]}:(o.controlLine={center:!1,line:[a,c],othersContral:[n,i]},i.controlLine.othersContral.push(o)),n=this.bezierControlCircle(l,5,6,h),i=this.bezierControlCircle(l,3,4,h),n.controlLine={center:!0,line:[s],othersContral:[i]},i.controlLine={center:!1,line:[s],othersContral:[n]},r.push(a,o,i,s,n);return r.forEach((function(t){t.controlElement=e})),e},createLineControl:function(t){var e=t.target,r=[];e.controlCircle=r;var n=e.path;function o(t,e){var r=new a["fabric"].Circle({left:t,top:e,radius:6,fill:"#fff",stroke:"#666",strokeWidth:1,hasBorders:!1,type:"controlCircle"});return r.addSelf(),r}function i(t){t.target.pathXY[t.target.pathX]=t.pointer.x,t.target.pathXY[t.target.pathY]=t.pointer.y,this.currentItem.length=this.getLineLength(t.target.controlElement)}function s(t,e,r){var a=o(n[t][e],n[t][r]);return a.pathXY=n[t],a.pathX=e,a.pathY=r,a.on({moved:this.updatePath,moving:i.bind(this)}),a}var c=s.call(this,0,1,2),h=s.call(this,1,1,2);r.push(c,h),r.forEach((function(t){t.controlElement=e}))},createCircle:function(t,e){var r=new a["fabric"].Circle({left:t,top:e,radius:6,fill:"#fff",stroke:"#666",strokeWidth:1,hasBorders:!1,type:"controlCircle"});return this.canvas.add(r),r},createTemp:function(t){for(var e=[],r=1;r<t.length;r++)for(var n=t[r-1][t[r-1].length-2],o=t[r-1][t[r-1].length-1],i=t[r][1],a=t[r][2],s=t[r][3],c=t[r][4],h=t[r][5],l=t[r][6],u=.01;u<1;u+=.01){var p=Math.pow(1-u,3)*n+3*u*Math.pow(1-u,2)*i+3*Math.pow(u,2)*(1-u)*s+Math.pow(u,3)*h,f=Math.pow(1-u,3)*o+3*u*Math.pow(1-u,2)*a+3*Math.pow(u,2)*(1-u)*c+Math.pow(u,3)*l;e.push([p.toFixed(4),f.toFixed(4)])}return e},detectBezierCurve:function(t,e){var r=this;t.pointTemp.forEach((function(n){var o=r.distance(e.absolutePointer,{x:n[0],y:n[1]});o<r.detect.minDistance&&(r.detect.minDistance=o,r.detect.target=t,r.detect.pointer={x:n[0],y:n[1]})}))},detectTool:function(t){var e=this;function r(e){for(var r=this,n=[{x:e.path[0][1],y:e.path[0][2]}],o=1,i=e.path.length;o<i;o++){var a={x:e.path[o][e.path[o].length-2],y:e.path[o][e.path[o].length-1]};n.push(a)}n.forEach((function(n){var o=r.distance(t.absolutePointer,n);o<r.detect.minDistance&&(r.detect.minDistance=o,r.detect.target=e,r.detect.pointer=n)}))}"Detect"===this.activeTool&&(this.detect.minDistance=10,this.detect.target&&(this.detect.target.stroke="black"),this.detect.target=null,this.detect.pointer=null,this.allItems.forEach((function(t){t.id&&r.call(e,t)})),this.detect.target||this.allItems.forEach((function(r){if(e.mouse.mouseCircle.intersectsWithObject(r)){if("L"===r.path[1][0]){var n=(r.path[1][2]-r.path[0][2])/(r.path[1][1]-r.path[0][1]),o=t.absolutePointer.x,i=t.absolutePointer.y,a=n/(n*n+1)*(i-r.path[0][2]+n*r.path[0][1]+o/n),s=i+o/n-a/n,c=Math.sqrt(Math.pow(o-a,2)+Math.pow(i-s,2));c<e.detect.minDistance&&(e.detect.minDistance=c,e.detect.target=r,e.detect.pointer={x:a,y:s})}"C"===r.path[1][0]&&e.detectBezierCurve(r,t)}})),this.detect.target&&(this.currentItem={isChange:!1,id:this.detect.target.id,target:this.detect.target,length:this.detect.target.length,path:this.detect.target.path,left:this.detect.target.left,top:this.detect.target.top}))},detectTool2:function(t){var e=this;function r(e){for(var r=this,n=[{x:e.path[0][1],y:e.path[0][2]}],o=1,i=e.path.length;o<i;o++)if("Z"!==e.path[o][0]){var a={x:e.path[o][e.path[o].length-2],y:e.path[o][e.path[o].length-1]};n.push(a)}n.forEach((function(n){var o=r.distance(t.absolutePointer,n);o<r.detect.minDistance&&(r.detect.minDistance=o,r.detect.target=e,r.detect.pointer=n)}))}function n(t,e){if(e.x1===e.x2)return{x:e.x1,y:t.y,len:Math.abs(t.x-e.x1)};if(e.y1===e.y2)return{y:e.y1,x:t.x,len:Math.abs(t.y-e.y1)};var r=(e.y2-e.y1)/(e.x2-e.x1),n=r/(r*r+1)*(t.y-e.y1+r*e.x1+t.x/r),o=t.y+t.x/r-n/r,i=Math.sqrt(Math.pow(t.x-n,2)+Math.pow(t.y-o,2));return 425.712===e.x2&&console.log("测试：：：",n,o,r,i),{len:i,x:n,y:o}}function o(t,e){return e.x1-e.x2<5&&e.x2-e.x1>-5&&(e.x1+=e.x1-e.x2>0?5:-5,e.x2+=e.x2-e.x1>0?5:-5),e.y1-e.y2<5&&e.y2-e.y1>-5&&(e.y1+=e.y1-e.y2>0?5:-5,e.y2+=e.y2-e.y1>0?5:-5),(e.x1<=t.x&&t.x<=e.x2||e.x2<=t.x&&t.x<=e.x1)&&(e.y1<=t.y&&t.y<=e.y2||e.y2<=t.y&&t.y<=e.y1)}"Detect"===this.activeTool&&(this.detect.minDistance=10,this.detect.target&&(this.detect.target.stroke="black"),this.detect.target=null,this.detect.pointer=null,this.allItems.forEach((function(t){t.id&&r.call(e,t)})),this.detect.target||this.allItems.forEach((function(r){if(r.padding=10,e.mouse.mouseCircle.intersectsWithObject(r)){if("Line"===r.type){var i=n(t.absolutePointer,{x1:r.path[0][1],y1:r.path[0][2],x2:r.path[1][1],y2:r.path[1][2]});i.len<e.detect.minDistance&&(e.detect.minDistance=i.len,e.detect.target=r,e.detect.pointer={x:i.x,y:i.y})}"Path"===r.type&&function(){for(var i,a,s,c=r.pointTemp,h=r.path,l=0,u=c.length;l<u;l++)if("L"===h[l][0]){var p=h[l-1][h[l-1].length-2],f=h[l-1][h[l-1].length-1],d=h[l][1],g=h[l][2];if(o(t.absolutePointer,{x1:p,y1:f,x2:d,y2:g})){var m=n(t.absolutePointer,{x1:p,y1:f,x2:d,y2:g});i=m.x,a=m.y,s=m.len,s<e.detect.minDistance&&(e.detect.minDistance=s,e.detect.target=r,e.detect.pointer={x:i,y:a})}}else{if("C"!==h[l][0])continue;c[l].forEach((function(n){i=n[0],a=n[1],s=e.distance(t.absolutePointer,{x:i,y:a}),s<e.detect.minDistance&&(e.detect.minDistance=s,e.detect.target=r,e.detect.pointer={x:i,y:a})}))}}()}r.padding=0})),this.detect.target&&(this.currentItem={isChange:!1,id:this.detect.target.id,target:this.detect.target,length:this.detect.target.length,path:this.detect.target.path,left:this.detect.target.left,top:this.detect.target.top}))},deleteItem:function(){var t=this;this.currentItem.target&&(this.currentItem.target.controlCircle&&this.currentItem.target.controlCircle.forEach((function(t){return t.removeSelf()})),this.currentItem.target.removeSelf()),this.allItems=this.allItems.filter((function(e){return e!==t.currentItem.target})),this.currentItem={isChange:!1,id:"",target:null,length:0,path:null,left:0,top:0}},distance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},getLineLength:function(t){return Math.sqrt(Math.pow(t.path[1][1]-t.path[0][1],2)+Math.pow(t.path[1][2]-t.path[0][2],2)).toFixed(4)},mouseMove:function(t){this.mouse.coord=t.absolutePointer,this.mouse.isClick&&(this.mouse.isDragging=!0),"Hand"!==this.activeTool&&(this.mouseCircleMove(t),"Line"===this.activeTool&&this.currentItem.path&&this.priviewLine(t),"BezierCurve"===this.activeTool&&this.currentItem.path&&this.priviewBezierCurve(t),"Detect"===this.activeTool&&this.detectTool2(t))},mouseOut:function(t){t.target||this.mouse.mouseCircle&&this.mouse.mouseCircle.removeSelf()},mouseDown:function(t){if(console.log(t.target),this.mouse.isClick=!0,"Hand"===this.activeTool){var e,r;if(t.target===this.currentItem.target)return;if((null===(e=t.target)||void 0===e?void 0:e.controlElement)===this.currentItem.target)return;(null===(r=this.currentItem.target)||void 0===r?void 0:r.controlCircle)&&this.currentItem.target.controlCircle.forEach((function(t){return t.removeSelf()})),t.target?this.currentItem.target!==t.target&&null!==this.currentItem.target&&(this.currentItem.target.isChange=!1):(this.currentItem.target.isChange=!1,this.currentItem={isChange:!1,id:"",target:null,length:0,path:null,left:0,top:0})}if("Line"===this.activeTool)if(this.currentItem.path){this.currentItem.path.push(["L",t.absolutePointer.x,t.absolutePointer.y]);var n=this.createPath(this.currentItem.path);this.allItems.push(n),console.log("创建线段:",n.id,n),this.currentItem.target.removeSelf(),this.currentItem.target=null,this.currentItem.path=null}else this.currentItem.path=[["M",t.absolutePointer.x,t.absolutePointer.y]];if("BezierCurve"===this.activeTool)if(this.currentItem.path){var o=this.currentItem.path,i=o.length-1,a=["C",2*o[i][5]-o[i][3],2*o[i][6]-o[i][4],t.absolutePointer.x,t.absolutePointer.y,t.absolutePointer.x,t.absolutePointer.y];this.currentItem.path.push(a),this.currentItem.target.removeSelf(),this.currentItem.target=this.createPath(this.currentItem.path,"blue")}else this.currentItem.path=[["M",t.absolutePointer.x,t.absolutePointer.y],["C",t.absolutePointer.x,t.absolutePointer.y,t.absolutePointer.x,t.absolutePointer.y,t.absolutePointer.x,t.absolutePointer.y]]},mouseUp:function(t){this.mouse.isClick=!1,this.mouse.isDragging=!1},mouseCircleMove:function(t){this.mouse.mouseCircle&&this.mouse.mouseCircle.removeSelf();var e=this.mouse.mouseCircle=new a["fabric"].Circle({left:t.absolutePointer.x,top:t.absolutePointer.y,perPixelTargetFind:!0,hoverCursor:"default",originX:"center",originY:"center",objectCaching:!1,radius:6,fill:"#fff",stroke:"blue",strokeWidth:1,selectable:!1});this.mouse.mouseCircle=e,this.detect.pointer&&(e.set({left:parseInt(this.detect.pointer.x),top:parseInt(this.detect.pointer.y)}),this.detect.target.stroke="blue"),this.mouse.coord={x:e.left,y:e.top},e.addSelf()},objDbclick:function(t){a["fabric"].Object.prototype.hasBorders=!1,!0!==t.target.isChange&&(t.target.isChange=!0,this.updatePath(t))},objMoving:function(t){t.target.controlCircle&&t.target.controlCircle.forEach((function(t){return t.removeSelf()}))},objMoved:function(t){this.updatePath(t)},objMouseDown:function(t){a["fabric"].Object.prototype.hasBorders=!0,this.currentItem={isChange:t.target.isChange,id:t.target.id,target:t.target,length:t.target.length,path:t.target.path,left:t.target.left,top:t.target.top}},priviewLine:function(t){var e=[this.currentItem.path[0],["L",t.absolutePointer.x,t.absolutePointer.y]];this.currentItem.target&&this.currentItem.target.removeSelf(),this.currentItem.target=this.createPath(e,"blue")},priviewBezierChange:function(t){var e=t.target,r=t.pointer.x-e.pathXY[e.pathX],n=t.pointer.y-e.pathXY[e.pathY];if(this.isSmoothBezierCurve){e.pathXY[e.pathX]=t.pointer.x,e.pathXY[e.pathY]=t.pointer.y;var o=e.controlLine.othersContral[0],i=e.controlLine.othersContral[1];e.controlLine.center?(e.controlLine.line.forEach((function(t){t.set({x1:t.x1+r,y1:t.y1+n,x2:t.x2+r,y2:t.y2+n}),t.setCoords()})),o.pathXY[o.pathX]+=r,o.pathXY[o.pathY]+=n,i&&(i.pathXY[i.pathX]+=r,i.pathXY[i.pathY]+=n),e.controlLine.othersContral.forEach((function(t){t.set({left:t.pathXY[t.pathX],top:t.pathXY[t.pathY]})}))):(e.controlLine.line[0].set({x1:t.pointer.x,y1:t.pointer.y}),e.controlLine.line[0].setCoords(),i&&(i.pathXY[i.pathX]-=r,i.pathXY[i.pathY]-=n,i.set({left:i.pathXY[i.pathX],top:i.pathXY[i.pathY]}),i.controlLine.line[0].set({x1:i.pathXY[i.pathX],y1:i.pathXY[i.pathY]}),i.controlLine.line[0].setCoords()))}else e.pathXY[e.pathX]=t.pointer.x,e.pathXY[e.pathY]=t.pointer.y,e.controlLine.center?e.controlLine.line.forEach((function(e){e.set({x1:e.x1,y1:e.y1,x2:t.pointer.x,y2:t.pointer.y}),e.setCoords()})):(e.controlLine.line[0].set({x1:t.pointer.x,y1:t.pointer.y}),e.controlLine.line[0].setCoords())},priviewBezierCurve:function(t){this.currentItem.target&&this.currentItem.target.removeSelf();var e=this.currentItem.path,r=t.absolutePointer;if(this.mouse.isDragging)switch(e[e.length-2][0]){case"M":break;case"C":e[e.length-1][1]=r.x,e[e.length-1][2]=r.y,e[e.length-2][3]=2*e[e.length-2][5]-r.x,e[e.length-2][4]=2*e[e.length-2][6]-r.y;break}e[e.length-1][3]=r.x,e[e.length-1][4]=r.y,e[e.length-1][5]=r.x,e[e.length-1][6]=r.y,this.currentItem.target=this.createPath(this.currentItem.path,"blue")},pathPointTemp:function(t){for(var e=t.path,r=[],n=0,o=e.length;n<o;n++)if("C"===e[n][0]){for(var i=[],a=e[n-1][e[n-1].length-2],s=e[n-1][e[n-1].length-1],c=e[n][1],h=e[n][2],l=e[n][3],u=e[n][4],p=e[n][5],f=e[n][6],d=.01;d<1;d+=.01){var g=Math.pow(1-d,3)*a+3*d*Math.pow(1-d,2)*c+3*Math.pow(d,2)*(1-d)*l+Math.pow(d,3)*p,m=Math.pow(1-d,3)*s+3*d*Math.pow(1-d,2)*h+3*Math.pow(d,2)*(1-d)*u+Math.pow(d,3)*f;i.push([g.toFixed(3),m.toFixed(3)])}r.push(i)}else r.push(e[n]);t.pointTemp=r},relativeToAbsolute:function(t){var e=t.path,r=0,n=0;e[0][1]-=r,e[0][2]-=n;for(var o=1;o<e.length;o++)if(/[a-zHSV]/.test(e[o][0])){var i=e[o-1][e[o-1].length-2],a=e[o-1][e[o-1].length-1];switch(e[o][0]){case"V":e[o][0]="L",e[o][1]=i,e[o][2]=e[o][2]-n;break;case"v":e[o][0]="L",e[o][1]=i,e[o][2]=a+e[o][2];break;case"H":e[o][0]="L",e[o][1]=e[o][1]-r,e[o][2]=a;break;case"h":e[o][0]="L",e[o][1]=i+e[o][1],e[o][2]=a;break;case"s":e[o][0]="C",e[o][5]=e[o][3]+i,e[o][6]=e[o][4]+a,e[o][3]=e[o][1]+i,e[o][4]=e[o][2]+a,"C"===e[o-1][0]?(e[o][1]=2*i-e[o-1][3],e[o][2]=2*a-e[o-1][4]):(e[o][1]=i,e[o][2]=a);break;case"S":e[o][0]="C",e[o][5]=e[o][3]-r,e[o][6]=e[o][4]-n,e[o][3]=e[o][1]-r,e[o][4]=e[o][2]-n,"C"===e[o-1][0]?(e[o][1]=2*i-e[o-1][3],e[o][2]=2*a-e[o-1][4]):(e[o][1]=i,e[o][2]=a);break;default:e[o][0]=e[o][0].toUpperCase();for(var s=1;s<e[o].length;s+=2)e[o][s]+=i,e[o][s+1]+=a;break}}else for(var c=1,h=e[o].length;c<h;c+=2)e[o][c]-=r,e[o][c+1]-=n},updatePath:function(t){var e;if("controlCircle"===t.target.type)e=t.target.controlElement;else{e=t.target;for(var r=0,n=e.path.length;r<n;r++){for(var o=1,i=e.path[r].length;o<i;o+=2)e.path[r][o]=e.path[r][o]+(e.left-this.currentItem.left);for(var a=2,s=e.path[r].length;a<s;a+=2)e.path[r][a]=e.path[r][a]+(e.top-this.currentItem.top)}}var c=this.createPath(e.path);return c.id=e.id,c.isChange=e.isChange,"controlCircle"===t.target.type&&e.controlCircle.forEach((function(t){return t.removeSelf()})),this.currentItem={isChange:c.isChange,id:c.id,target:c,length:c.length,path:c.path,left:c.left,top:c.top},this.allItems=this.allItems.filter((function(t){return t!==e})),this.allItems.push(c),this.canvas.remove(e),e.isChange&&("Line"===e.type?this.createLineControl({target:c}):this.createBezierCurveControl({target:c})),c}},mounted:function(){this.initialize()}},h=c,l=(r("034f"),r("2877")),u=Object(l["a"])(h,o,i,!1,null,null,null),p=u.exports;new n["a"]({fabric:s.a,render:function(t){return t(p)}}).$mount("#app")},"85ec":function(t,e,r){}});
//# sourceMappingURL=app.ae19eb95.js.map